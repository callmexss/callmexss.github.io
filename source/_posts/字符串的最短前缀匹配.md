---
title: 字符串的最短前缀匹配
date: 2019-07-23 17:12:05
categorises:
tags:
- bytedance
- string
---

输入第一行为一个整数，表示字符串的行数，接下来的 N 行每行为一个字符串。

输入：

```text
5
bytedance
toutiaohao
toutiaoapp
iesaweme
iestiktok
```

输出：

```text
b
toutiaoh
toutiaoa
iesa
iest
```

> 题目描述：找到输入中每个字符串的最短唯一前缀。
>
> 数据范围：N ≤ 1000，总字符数 < 1000000。
> 
> 输入数据确保没有一个字符串是另一个字符串的前缀。

思路是每个字符串和其他的所有字符串做比较，记录两个字符串间相同的位数，取其中的最大值作为字符串的唯一标识。

例如：

```python
word = 'bytedance'

other_words = [
    'toutiaohao',
    'toutiaoapp',
    'iesaweme',
    'iestiktok',
]

# b != t
# b != i
# loc = 0
print('bytedance'[:loc+1])
```

```python
word = 'toutiaohao'

other_words = [
    'bytedance',
    'toutiaoapp',
    'iesaweme',
    'iestiktok',
]

# for 'toutiaoapp':
# t != t
# o != o
# ...
# a != a
# o != o
# loc = 7
print('toutiaohao'[:loc+1])
```

按照这种思路写出代码：

```python
def process(str_list):
    for word in str_list:
        # one char must be unique
        if len(word) == 1:
            print(word)
            continue
            
        # save the largest i for where the unique prefix ends
        saved_i = None
        for other_word in str_list:
            # not do self compare 
            if word == other_word:
                continue
            i = 0
            # find the first different char's location between word and other_word
            while i < len(other_word):
                if word[i] == other_word[i]:
                    i += 1
                else:
                    # find the first different char
                    if not saved_i:
                        # for the first inner loop
                        saved_i = i
                    else:
                        # update saved_i if current i is larger
                        saved_i = max(i, saved_i)
                    break
            # if other_word is a sub-string of word
            # i will be len(other_word)
            # and the else part will never be reached
            # which means saved_i still is None
            # so check this case
            if i == len(other_word):
                saved_i = i

        print(word[:saved_i+1])
        continue


if __name__ == "__main__":
    # get toutal input count
    N = int(input())
    
    if N <= 0:
        exit()
    
    str_list = []
    for i in range(N):
        str_list.append(input().strip())  # read a word
        
    if N == 1:
        print(str_list[0][0])
    else:
        process(str_list)

```
